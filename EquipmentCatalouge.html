<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Equipment Catalogue</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-bottom: 20px;
      gap: 10px;
    }
    .controls input[type="search"],
    .controls select {
      padding: 8px;
      font-size: 16px;
      min-width: 200px;
      flex-grow: 1;
      max-width: 300px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }
    .card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
      overflow: hidden;
      transition: box-shadow 0.3s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    .card:hover {
      box-shadow: 0 6px 16px rgb(0 0 0 / 0.2);
    }
    .card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-bottom: 1px solid #ddd;
      background: #e0e0e0;
      loading: lazy;
    }
    .card-name {
      padding: 12px;
      font-weight: bold;
      font-size: 18px;
      color: #0073e6;
      text-decoration: none;
      user-select: none;
    }
    .card-name:hover {
      text-decoration: underline;
    }
    .pagination {
      margin-top: 30px;
      text-align: center;
    }
    .pagination button {
      padding: 8px 12px;
      margin: 0 5px;
      font-size: 16px;
      border: 1px solid #0073e6;
      background: #fff;
      color: #0073e6;
      border-radius: 4px;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease, color 0.3s ease;
    }
    .pagination button:hover:not(:disabled) {
      background: #0073e6;
      color: #fff;
    }
    .pagination button:disabled {
      opacity: 0.5;
      cursor: default;
    }
  </style>
</head>
<body>

  <h1>Equipment Catalogue</h1>

  <div class="controls">
    <input type="search" id="searchInput" placeholder="Search equipment..." aria-label="Search equipment" />
    <select id="sortSelect" aria-label="Sort equipment">
      <option value="name">Sort by Name</option>
      <option value="category">Sort by Category</option>
    </select>
  </div>

  <div id="equipmentGrid" class="grid" aria-live="polite" aria-atomic="true"></div>

  <div class="pagination" aria-label="Pagination controls">
    <button id="prevPageBtn" aria-label="Previous page">Previous</button>
    <span id="pageInfo" aria-live="polite" aria-atomic="true"></span>
    <button id="nextPageBtn" aria-label="Next page">Next</button>
  </div>

  <script>
    // Equipment data array
    const equipmentData = [
      {
        id: "eq1",
        name: "Excavator",
        category: "Heavy",
        imageUrl: "https://via.placeholder.com/300x140?text=Excavator",
        description:
          "A powerful heavy equipment used for digging and earthmoving.",
      },
      {
        id: "eq2",
        name: "Bulldozer",
        category: "Heavy",
        imageUrl: "https://via.placeholder.com/300x140?text=Bulldozer",
        description:
          "A heavy machine with a large blade for pushing material during construction.",
      },
      {
        id: "eq3",
        name: "Drill Machine",
        category: "Light",
        imageUrl: "https://via.placeholder.com/300x140?text=Drill+Machine",
        description:
          "A tool used for making round holes or driving fasteners.",
      },
      {
        id: "eq4",
        name: "Crane",
        category: "Heavy",
        imageUrl: "https://via.placeholder.com/300x140?text=Crane",
        description:
          "A tall machine used for moving heavy objects by suspending them from a projecting arm.",
      },
      {
        id: "eq5",
        name: "Welding Machine",
        category: "Light",
        imageUrl: "https://via.placeholder.com/300x140?text=Welding+Machine",
        description:
          "A device used to join metals by melting and fusing them together.",
      },
      {
        id: "eq6",
        name: "Loader",
        category: "Heavy",
        imageUrl: "https://via.placeholder.com/300x140?text=Loader",
        description:
          "A heavy equipment machine used in construction to load materials.",
      },
      {
        id: "eq7",
        name: "Concrete Mixer",
        category: "Light",
        imageUrl: "https://via.placeholder.com/300x140?text=Concrete+Mixer",
        description:
          "A device that combines cement, aggregate such as sand or gravel, and water to form concrete.",
      },
      // Add more as needed
    ];

    // Pagination & state
    let currentPage = 1;
    const itemsPerPage = 6;

    // Cached elements
    const grid = document.getElementById("equipmentGrid");
    const searchInput = document.getElementById("searchInput");
    const sortSelect = document.getElementById("sortSelect");
    const prevPageBtn = document.getElementById("prevPageBtn");
    const nextPageBtn = document.getElementById("nextPageBtn");
    const pageInfo = document.getElementById("pageInfo");

    // Filter, sort and paginate data
    function getFilteredSortedData() {
      const searchTerm = searchInput.value.trim().toLowerCase();
      let filtered = equipmentData.filter(eq =>
        eq.name.toLowerCase().includes(searchTerm)
      );

      if (sortSelect.value === "name") {
        filtered.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sortSelect.value === "category") {
        filtered.sort((a, b) => a.category.localeCompare(b.category));
      }

      return filtered;
    }

    function renderPage() {
      const filteredData = getFilteredSortedData();
      const totalPages = Math.ceil(filteredData.length / itemsPerPage);

      if (currentPage > totalPages) currentPage = totalPages || 1;

      const start = (currentPage - 1) * itemsPerPage;
      const paginatedData = filteredData.slice(start, start + itemsPerPage);

      grid.innerHTML = "";

      if (paginatedData.length === 0) {
        grid.innerHTML = "<p>No equipment found.</p>";
      } else {
        paginatedData.forEach(eq => {
          const card = document.createElement("div");
          card.className = "card";
          card.tabIndex = 0;

          const img = document.createElement("img");
          img.src = eq.imageUrl;
          img.alt = eq.name;
          img.loading = "lazy";

          const link = document.createElement("a");
          link.href = `equipment-description.html?id=${encodeURIComponent(eq.id)}`;
          link.className = "card-name";
          link.textContent = eq.name;
          link.setAttribute("aria-label", `View details of ${eq.name}`);

          card.appendChild(img);
          card.appendChild(link);

          grid.appendChild(card);
        });
      }

      pageInfo.textContent = `Page ${currentPage} of ${totalPages || 1}`;
      prevPageBtn.disabled = currentPage === 1;
      nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;
    }

    // Event listeners
    searchInput.addEventListener("input", () => {
      currentPage = 1;
      renderPage();
    });

    sortSelect.addEventListener("change", () => {
      currentPage = 1;
      renderPage();
    });

    prevPageBtn.addEventListener("click", () => {
      if (currentPage > 1) {
        currentPage--;
        renderPage();
      }
    });

    nextPageBtn.addEventListener("click", () => {
      const filteredLength = getFilteredSortedData().length;
      const totalPages = Math.ceil(filteredLength / itemsPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        renderPage();
      }
    });

    // Initial render
    renderPage();
  </script>
</body>
</html>
